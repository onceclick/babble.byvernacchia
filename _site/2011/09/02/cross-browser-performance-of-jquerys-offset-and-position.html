<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>
		
			Cross-browser performance of jQuery's .offset() and .position() | Babble by Vernacchia
		
	</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="index, follow" />
<meta name="revisit-after" content="14 days" />
<meta name="content-language" content="english" />
<meta name="robots" content="INDEX,FOLLOW" />

  <meta name="description" content="For work I recently had to convert a PSD to XHTML/CSS. The only problem with the design, that I could come to find, was how it called for a content area to meet up with another section, the footer,...">


<meta name="keywords" content="technology, javascript, blogging, web development, programming, babble" />

	<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />

	<meta property="og:title" content="Cross-browser performance of jQuery's .offset() and .position()" />


	<meta property="og:url" content="http://babble.byvernacchia.com" />






	<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@vernacchia" />
<meta name="twitter:creator" content="@vernacchia" />

  <meta name="twitter:title" content="Cross-browser performance of jQuery's .offset() and .position()" />


  <meta name="twitter:url" content="http://babble.byvernacchia.com/2011/09/02/cross-browser-performance-of-jquerys-offset-and-position.html" />


  <meta name="twitter:description" content="For work I recently had to convert a PSD to XHTML/CSS. The only problem with the design, that I could come to find, was how it called for a content area to meet up with another section, the footer,..." />


	<!-- bootstrap styles -->
	<link rel="stylesheet" href="/css/bootstrap.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/styles.css">
</head>
<body>
	<div class="site-search-container">
		<form action="/search/" method="get" class="search-form">
			<input class="custom-input" id="query" type="text" name="q" placeholder="Search...">
		</form>
		<div class="search-toggle" id="js-search-toggle">Search</div>
	</div> 

	<div class="container">
		<div class="row-fluid">
			<div class="span12">&nbsp;</div>
		</div>
		<div class="row-fluid">
			<div class="span9">
				<div class="span12 post">
					<p><a href="/">go back home...</a></p>
					<h1 class="site-title">Cross-browser performance of jQuery's .offset() and .position()</h1>
					<p class="post-meta">September 02, 2011 at 11:50 AM</p>
					<p><h3>The Problem</h3>

<p>For work I recently had to convert a PSD to XHTML/CSS. The only problem with the design, that I could come to find, was how it called for a content area to meet up with another section, the footer, no matter what the height of the content area. So basically, the bottom of the content area always needs to meet up with the top of the footer. If there was enough text it would work, but if there wasn’t it would fall short. Just for reference the footer is pushed to the bottom of the page already (it will always be at the bottom of the page no matter the amount of text). I put a picture below to help illustrate the problem.</p>

<div style='width:546px; height:348px;' class='img-centered'><img src="/generated/2011/09/offset-546x348-3d53f9.jpg"  width="546" height="348"></div>


<h3>What Method to Use?</h3>

<p>After looking around for a CSS solution, which I couldn’t find and haven’t found for the 4 years I’ve been doing this, I turned to jQuery. I first tried using <strong><em><a href="http://api.jquery.com/position/">.position()</a></em></strong>. This function does the following, “Gets the current coordinates of the first element in the set of matched elements, relative to the offset parent.” I didn’t actually read what it did at first and wasted time using this.</p>

<p>Then I turned to <em><strong><a href="http://api.jquery.com/offset/">.offset()</a></strong></em>, which does the following, “Gets the current coordinates of the first element in the set of matched elements, relative to the document.”</p>

<p>The main difference between this method and <em>.position</em> is this element retrieves the position of the element relative to the whole document, not just the offset from the element it’s nested in (parent). This caused a bunch of trouble and finally I found <em>.offset()</em>.</p>

<h3>Finding the Height</h3>

<p>Now that I figured out what to use, I used jQuery to find the top of the element that needs to be the certain height, mentioned above, and where it should end. Then with simple subtraction I was able to set a certain height.</p>

<h3>Cross Browser Issues</h3>

<p>After figuring this out, I thought I was done. Then, to my surprise, after testing it in all browsers it didn’t work in Google Chrome, but it seemed to work in every other browser. After doing some research I found that Chrome gets the position of elements at a different time then other browsers.</p>

<p>Chrome waits for the whole page to load, more specifically images, then grabs the position. Other browsers only need the DOM to load before it grabs the position of an element. So there is an easy work around. After detecting for Chrome, which you can google pretty easily, you can do the following (UPDATED):</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">middle_top</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#middle&quot;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">footer_top</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#footer&quot;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#middle&#39;</span><span class="p">).</span><span class="nx">height</span><span class="p">(</span><span class="nx">footer_top</span> <span class="o">-</span> <span class="nx">middle_top</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>


<p>This is different from the usual:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">middle_top</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#middle&quot;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">footer_top</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#footer&quot;</span><span class="p">).</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#middle&#39;</span><span class="p">).</span><span class="nx">height</span><span class="p">(</span><span class="nx">footer_top</span> <span class="o">-</span> <span class="nx">middle_top</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>


<p>which most people are used to, but due to the way the browsers work, this is what has to be done.</p>

<p>This will get you the top of the element after everything has loaded. You may notice it actually change the height when the page is loaded, but it’s instantaeous, so I don’t count it as that big of a deal.</p>

<p>Hopefully this helps someone out, as it took me a good amount of time to figure out what was going on. If anyone has any <strong>CSS</strong> solutions to this problem let me know and I will need to look into that.</p>
</p>
					<div class="tag-container">
						<strong>Tags:&nbsp;</strong>
						
							<a href="/tags/cross-browser-issues" class="post-tag" title="View posts tagged with &quot;cross-browser-issues&quot;">
								cross-browser-issues<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/jquery" class="post-tag" title="View posts tagged with &quot;jquery&quot;">
								jquery<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/offset" class="post-tag" title="View posts tagged with &quot;offset&quot;">
								offset<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/position" class="post-tag" title="View posts tagged with &quot;position&quot;">
								position<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/programming" class="post-tag" title="View posts tagged with &quot;programming&quot;">
								programming
							</a>
							
						
					</div>	
				</div>
			</div>
			<div class="span3 pad-bottom">
				<div class="span12"><h1>&nbsp;</h1></div>
				<div class="span12" style="margin-left:0 !important;">
					<div class="bio-image"></div>
<div class="bio-desc txt-center">
	<p>I am a life-long learner, adventure seeker, and front-end developer for <a href="https://twitter.com/ExactTarget" target="_blank">@ExactTarget</a></p>
</div>
<ul class="social clearfix">
	<li class="linkedin"><a href="http://www.linkedin.com/in/alexvernacchia/" target="_blank"></a></li>
	<li class="twitter"><a href="https://twitter.com/vernacchia" target="_blank"></a></li>
	<li class="github"><a href="https://github.com/vernak2539" target="_blank"></a></li>
	<li class="about-me"><a href="http://about.me/vernacchia" target="_blank"></a></li>
</ul>
<div class="repo-btn-container">
	<a href="https://github.com/vernak2539/babble.byvernacchia" class="btn btn-info btn-large" target="_blank">This Site's Repo</a>
</div>
				</div>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">&nbsp;</div>
		</div>
		<div id="disqus_thread" class="row-fluid"></div>
	</div>
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = ''; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		/*(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();*/
	</script>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-XXXX-X', 'yourSiteHere.com');
		ga('send', 'pageview');
	</script>
	<script type="text/javascript" src="/js/min/jquery.js"></script>
	<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/js/min/all.js" async></script>
</body>
</html>
 