<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>
		
			My Contribution to FuelUX | Babble by Vernacchia
		
	</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="index, follow" />
<meta name="revisit-after" content="14 days" />
<meta name="content-language" content="english" />
<meta name="robots" content="INDEX,FOLLOW" />

  <meta name="description" content="I finally made my first open-source contribution that I am proud of. Well not my first contribution and I&#39;m proud of most of my work, but this was the first &quot;real&quot; one for me. @ExactT...">


<meta name="keywords" content="technology, javascript, blogging, web development, programming, babble" />

	<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />

	<meta property="og:title" content="My Contribution to FuelUX" />


	<meta property="og:url" content="http://babble.byvernacchia.com" />






	<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@vernacchia" />
<meta name="twitter:creator" content="@vernacchia" />

  <meta name="twitter:title" content="My Contribution to FuelUX" />


  <meta name="twitter:url" content="http://babble.byvernacchia.com/2013/07/08/my-contribution-to-fuelux.html" />


  <meta name="twitter:description" content="I finally made my first open-source contribution that I am proud of. Well not my first contribution and I&#39;m proud of most of my work, but this was the first &quot;real&quot; one for me. @ExactT..." />


	<!-- bootstrap styles -->
	<link rel="stylesheet" href="/css/bootstrap.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/styles.css">
</head>
<body>
	<div class="site-search-container">
		<form action="/search/" method="get" class="search-form">
			<input class="custom-input" id="query" type="text" name="q" placeholder="Search...">
		</form>
		<div class="search-toggle" id="js-search-toggle">Search</div>
	</div> 

	<div class="container">
		<div class="row-fluid">
			<div class="span12">&nbsp;</div>
		</div>
		<div class="row-fluid">
			<div class="span9">
				<div class="span12 post">
					<p><a href="/">go back home...</a></p>
					<h1 class="site-title">My Contribution to FuelUX</h1>
					<p class="post-meta">July 08, 2013 at 04:49 PM</p>
					<p><p>I finally made my first open source contribution that I am proud of. Well not my first contribution and I'm proud of most of my work, but this was the first "real" one for me.</p>

<p>At <a href="http://www.exacttarget.com">ExactTarget</a> (where I work) we use <a href="https://github.com/ExactTarget/fuelux">FuelUX</a> for our front-end components. FuelUX extends <a href="https://github.com/twitter/bootstrap">Bootstrap</a>, adding UI components that I/we use in our everyday development.</p>

<p>While I was working on a project something frustrated me. It frustrated me so much I knew I needed to do something. So I forked our repo and went to work.</p>

<h3>The Problem...</h3>

<p>...is that Bootstrap's dropdown menus always display themselves below the clicked element. When an element is positioned near the bottom of the page or the dropdown is too big, it will run off the page.</p>

<p>For <a href="http://exacttarget.github.io/fuelux/#datagrid">our datagrid</a> this is a <strong>HUGE</strong> problem (since most of them are stretched to the bottom of the page).</p>

<h3>My Solution</h3>

<p>To combat this "problem" I created a javascript file that highjacks the click events on the elements with <code>data-toggle="dropdown"</code>. After highjacking the click, it makes a few calculations and will decide where to place the dropdown.</p>

<p>My first working-draft made calculations using the <code>window</code> as the containing element. But, what happens when a containing element has an overflow value not set to "visible"? Using the window would not work in this case.</p>

<p>To fix this, I cycle through the clicked element's parents, choose the closest element whose CSS overflow value is not "visible," and set this to be the container which the calculations are based on.</p>

<h3>How to enable</h3>

<ol>
<li>Include the JS and LESS files (gists below)</li>
<li>Add <code>data-direction</code> to the same element that has <code>data-toggle</code> and set it to a value below:

<ul>
<li><code>up</code> = <em>will place dropdown above clicked element</em></li>
<li><code>down</code> = <em>will place dropdown below clicked element (falls back to default bootstrap behavior)</em></li>
<li><code>auto</code> = <em>will intelligently decide where to place dropdown based on height of dropdown and distances above and below the clicked element</em></li>
</ul>
</li>
</ol>


<p>I put the gists below, or you could check it out the <a href="https://github.com/ExactTarget/fuelux">FuelUX repo</a> <em>(2.4.0-wip branch)</em>.</p>

<p>Maybe this will end up in Bootstrap one day. Or, maybe not since Bootstrap 3 will be mobile first. I guess we'll see.</p>

<p><strong>NOTE:</strong> If the clicked element's parent's position is set to <em>static</em> this will <em>ALTER</em> the styles. This is because my positioning won't work correctly in this situation so I overwrite it to <em>relative</em>.</p>

<p><strong>NOTE 2:</strong> This code could probably be cleaned up a little more, but that's for a later time.</p>

<h3>Gists</h3>

<div id="gist-82c02b8fed1877368d7a-intelligent-dropdown-js">
<script src="https://gist.github.com/82c02b8fed1877368d7a.js?file=intelligent-dropdown.js"></script>
<noscript>
<pre>/*
 * Fuel UX Intelligent Bootstrap Dropdowns
 * https://github.com/ExactTarget/fuelux
 *
 * Copyright (c) 2013 ExactTarget
 * Licensed under the MIT license.
 */

define([ &quot;jquery&quot;, &quot;fuelux/all&quot;], function($) {

    $(function() {
        $(document.body).on(&quot;click&quot;, &quot;[data-toggle=dropdown][data-direction]&quot;, function( event ) {

            var dataDirection = $(this).data().direction;

            // if data-direction is not auto or up, default to bootstraps dropdown
            if( dataDirection === &quot;auto&quot; || dataDirection === &quot;up&quot; ) {
                // only changing css positioning if position is set to static
                // if this doesn&quot;t happen, dropUp will not be correct
                // works correctly for absolute, relative, and fixed positioning
                if( $(this).parent().css(&quot;position&quot;) === &quot;static&quot; ) {
                    $(this).parent().css({ position: &quot;relative&quot;});
                }

                // only continue into this function if the click came from a user
                if( event.hasOwnProperty(&quot;originalEvent&quot;) ) {
                    // stopping bootstrap event propagation
                    event.stopPropagation();

                    // deciding what to do based on data-direction attribute
                    if( dataDirection === &quot;auto&quot; ) {
                        // have the drop down intelligently decide where to place itself
                        forceAutoDropDown( $(this) );
                    } else if ( dataDirection === &quot;up&quot; ) {
                        forceDropUp( $(this) );
                    }
                }
            }

        });

        function forceDropUp( element ) {
            var dropDown      = element.next();
            var dropUpPadding = 5;
            var topPosition;

            $(dropDown).addClass(&quot;dropUp&quot;);
            topPosition = ( ( dropDown.outerHeight() + dropUpPadding ) * -1 ) + &quot;px&quot;;

            dropDown.css({
                visibility: &quot;visible&quot;,
                top: topPosition
            });
            element.click();
        }

        function forceAutoDropDown( element ) {
            var dropDown      = element.next();
            var dropUpPadding = 5;
            var topPosition;

            // setting this so I can get height of dropDown without it being shown
            dropDown.css({ visibility: &quot;hidden&quot; });

            // deciding where to put menu
            if( dropUpCheck( dropDown ) ) {
                $(dropDown).addClass(&quot;dropUp&quot;);
                topPosition = ( ( dropDown.outerHeight() + dropUpPadding ) * -1 ) + &quot;px&quot;;
            } else {
                $(dropDown).removeClass(&quot;dropUp&quot;);
                topPosition = &quot;auto&quot;;
            }

            dropDown.css({
                visibility: &quot;visible&quot;,
                top: topPosition
            });
            element.click();
        }

        function dropUpCheck( element ) {
            // caching container
            var $container = getContainer( element );

            // building object with measurementsances for later use
            var measurements                = {};
            measurements.parentHeight       = element.parent().outerHeight();
            measurements.parentOffsetTop    = element.parent().offset().top;
            measurements.dropdownHeight     = element.outerHeight();
            measurements.containerHeight    = $container.overflowElement.outerHeight();

            // this needs to be different if the window is the container or another element is
            measurements.containerOffsetTop = ( !! $container.isWindow ) ? $container.overflowElement.scrollTop() : $container.overflowElement.offset().top;

            // doing the calculations
            measurements.fromTop    = measurements.parentOffsetTop - measurements.containerOffsetTop;
            measurements.fromBottom = measurements.containerHeight - measurements.parentHeight - ( measurements.parentOffsetTop - measurements.containerOffsetTop );

            // actual determination of where to put menu
            // false = drop down
            // true = drop up
            if( measurements.dropdownHeight &lt; measurements.fromBottom ) {
                return false;
            } else if ( measurements.dropdownHeight &lt; measurements.fromTop ) {
                return true;
            } else if ( measurements.dropdownHeight &gt;= measurements.fromTop &amp;&amp; measurements.dropdownHeight &gt;= measurements.fromBottom ) {
                // decide which one is bigger and put it there
                if( measurements.fromTop &gt;= measurements.fromBottom ) {
                    return true;
                } else {
                    return false;
                }
            }
        }

        function getContainer( element ) {
            var containerElement = window;
            var isWindow         = true;
            $.each( element.parents(), function(index, value) {
                if( $(value).css(&#39;overflow&#39;) !== &#39;visible&#39; ) {
                    containerElement = value;
                    isWindow         = false;
                    return false;
                }
            });
            return {
                overflowElement: $( containerElement ),
                isWindow: isWindow
            };
        }
    });
});</pre>
</noscript>
</div>




<div id="gist-82c02b8fed1877368d7a-intelligent-dropdown-less">
<script src="https://gist.github.com/82c02b8fed1877368d7a.js?file=intelligent-dropdown.less"></script>
<noscript>
<pre>.dropUp {
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}</pre>
</noscript>
</div>



</p>
					<div class="tag-container">
						<strong>Tags:&nbsp;</strong>
						
							<a href="/tags/exacttarget" class="post-tag" title="View posts tagged with &quot;exacttarget&quot;">
								exacttarget<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/open-source" class="post-tag" title="View posts tagged with &quot;open-source&quot;">
								open-source<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/FuelUX" class="post-tag" title="View posts tagged with &quot;FuelUX&quot;">
								FuelUX<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/twitter-bootstrap" class="post-tag" title="View posts tagged with &quot;twitter-bootstrap&quot;">
								twitter-bootstrap<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/javascript" class="post-tag" title="View posts tagged with &quot;javascript&quot;">
								javascript<span class="comma">,&nbsp;</span>
							</a>
							
							
						
							<a href="/tags/programming" class="post-tag" title="View posts tagged with &quot;programming&quot;">
								programming
							</a>
							
						
					</div>	
				</div>
			</div>
			<div class="span3 pad-bottom">
				<div class="span12"><h1>&nbsp;</h1></div>
				<div class="span12" style="margin-left:0 !important;">
					<div class="bio-image"></div>
<div class="bio-desc txt-center">
	<p>I am a life-long learner, adventure seeker, and front-end developer for <a href="https://twitter.com/ExactTarget" target="_blank">@ExactTarget</a></p>
</div>
<ul class="social clearfix">
	<li class="linkedin"><a href="http://www.linkedin.com/in/alexvernacchia/" target="_blank"></a></li>
	<li class="twitter"><a href="https://twitter.com/vernacchia" target="_blank"></a></li>
	<li class="github"><a href="https://github.com/vernak2539" target="_blank"></a></li>
	<li class="about-me"><a href="http://about.me/vernacchia" target="_blank"></a></li>
</ul>
<div class="repo-btn-container">
	<a href="https://github.com/vernak2539/babble.byvernacchia" class="btn btn-info btn-large" target="_blank">This Site's Repo</a>
</div>
				</div>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">&nbsp;</div>
		</div>
		<div id="disqus_thread" class="row-fluid"></div>
	</div>
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = ''; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		/*(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();*/
	</script>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-XXXX-X', 'yourSiteHere.com');
		ga('send', 'pageview');
	</script>
	<script type="text/javascript" src="/js/min/jquery.js"></script>
	<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/js/min/all.js" async></script>
</body>
</html>
 